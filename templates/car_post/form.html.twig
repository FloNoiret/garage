{% extends 'base.html.twig' %}

{% block body %}
	<div class="container mt-5 mb-5">
		<h1 class="text-center mt-5">Ajouter un VÃ©hicule d'Occasion</h1>
	</div>

	{# Form to add car #}
	<div class="container mt-5 mb-5">
		{{ form_start(car_post_form) }}
		{{ form_row(car_post_form.title) }}
		{{ form_row(car_post_form.content) }}
		{{ form_row(car_post_form.price) }}
		{{ form_row(car_post_form.kilometer) }}
		{{ form_row(car_post_form.Year) }}
		{{ form_row(car_post_form.image) }}

		<p>Options et Equipements</p>

		<ul id="reponses-list" class="reponse">
			{% for reponse in car_post_form.reponses %}
				<li>{{ form_row(reponse.libelle) }}</li>
			{% endfor %}
		</ul>

		<button type="button" id="add-reponse-btn">Ajouter une option</button>
		<br>
		<input class="btn btn-danger m-2 addreponse" type="submit" value="Publier">
		{{ form_end(car_post_form) }}
	</div>

{% endblock %}

{% block javascripts %}


	<script>
		document.addEventListener('DOMContentLoaded', function () { // Get the list element and the initial index
var reponsesList = document.getElementById('reponses-list');
var index = reponsesList.children.length;

// Add option button event listener
document.getElementById('add-reponse-btn').addEventListener('click', function () { // Get the HTML prototype and replace the placeholder with the current index
var prototype = '{{ form_widget(car_post_form.reponses.vars.prototype) }}';
var newReponse = prototype.replace(/__name__/g, index);
// Create a new list item and append it to the list
var li = document.createElement('li');
li.innerHTML = newReponse;
reponsesList.appendChild(li);
// Increment the index for the next option

index++;
});
});
	</script>

{% endblock %}
